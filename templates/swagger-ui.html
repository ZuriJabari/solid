<!DOCTYPE html>
<html>
  <head>
    <title>Urban Herb API - Documentation</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@latest/swagger-ui.css" />
    <link rel="icon" type="image/png" href="https://unpkg.com/swagger-ui-dist@latest/favicon-32x32.png" sizes="32x32" />
    <style>
      html { box-sizing: border-box; overflow: -moz-scrollbars-vertical; overflow-y: scroll; }
      *, *:before, *:after { box-sizing: inherit; }
      body { margin: 0; background: #fafafa; }
      .swagger-ui .topbar { display: none; }
      #error-message { 
        display: none; 
        padding: 20px;
        background-color: #f44336;
        color: white;
        margin-bottom: 15px;
      }
    </style>
  </head>
  <body>
    <div id="error-message"></div>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@latest/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@latest/swagger-ui-standalone-preset.js"></script>
    <script>
    window.onload = function() {
      try {
        const ui = SwaggerUIBundle({
          url: "{% url 'schema' %}",
          dom_id: '#swagger-ui',
          deepLinking: true,
          presets: [
            SwaggerUIBundle.presets.apis,
            SwaggerUIStandalonePreset
          ],
          plugins: [
            SwaggerUIBundle.plugins.DownloadUrl
          ],
          layout: "BaseLayout",
          persistAuthorization: true,
          displayOperationId: true,
          filter: true,
          withCredentials: true,
          onComplete: function() {
            console.log('Swagger UI loaded successfully');
          },
          responseInterceptor: function(response) {
            if (response.status !== 200) {
              console.error('API response error:', response);
              document.getElementById('error-message').style.display = 'block';
              document.getElementById('error-message').textContent = 
                'Error loading API documentation. Status: ' + response.status;
            }
            return response;
          }
        });
        window.ui = ui;
      } catch (error) {
        console.error('Error initializing Swagger UI:', error);
        document.getElementById('error-message').style.display = 'block';
        document.getElementById('error-message').textContent = 
          'Error initializing API documentation: ' + error.message;
      }
    };
    </script>
  </body>
</html> 